{"version":3,"file":"utils.mjs","sources":["../src/utils.ts"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport camelCase from 'camelcase';\n\nimport { PackageJson } from './types';\n\n// Remove the package name scope if it exists\nexport const removeScope = (name: string) => name.replace(/^@.*\\//, '');\n\n// UMD-safe package name\nexport const safeVariableName = (name: string) =>\n  camelCase(\n    removeScope(name)\n      .toLowerCase()\n      .replace(/((^[^a-zA-Z]+)|[^\\w.-])|([^a-zA-Z0-9]+$)/g, '')\n  );\n\nexport const safePackageName = (name: string) =>\n  name\n    .toLowerCase()\n    .replace(/(^@.*\\/)|((^[^a-zA-Z]+)|[^\\w.-])|([^a-zA-Z0-9]+$)/g, '');\n\nexport const external = (id: string) =>\n  !id.startsWith('.') && !path.isAbsolute(id);\n\n// Make sure any symlinks in the project folder are resolved:\n// https://github.com/facebookincubator/create-react-app/issues/637\nexport const appDirectory = fs.realpathSync(process.cwd());\nexport const resolveApp = function (relativePath: string) {\n  return path.resolve(appDirectory, relativePath);\n};\n\n// Taken from Create React App, react-dev-utils/clearConsole\n// @see https://github.com/facebook/create-react-app/blob/master/packages/react-dev-utils/clearConsole.js\nexport function clearConsole() {\n  process.stdout.write(\n    process.platform === 'win32' ? '\\x1B[2J\\x1B[0f' : '\\x1B[2J\\x1B[3J\\x1B[H'\n  );\n}\n\nexport function getReactVersion({\n  dependencies,\n  devDependencies,\n}: PackageJson) {\n  return (\n    (dependencies && dependencies.react) ||\n    (devDependencies && devDependencies.react)\n  );\n}\n\nexport function getNodeEngineRequirement({ engines }: PackageJson) {\n  return engines && engines.node;\n}\n"],"names":["removeScope","name","replace","safeVariableName","camelCase","toLowerCase","safePackageName","external","id","startsWith","path","isAbsolute","appDirectory","fs","realpathSync","process","cwd","resolveApp","relativePath","resolve","clearConsole","stdout","write","platform","getReactVersion","dependencies","devDependencies","react","getNodeEngineRequirement","engines","node"],"mappings":"2EAOaA,EAAeC,GAAiBA,EAAKC,QAAQ,SAAU,IAGvDC,EAAoBF,GAC/BG,EACEJ,EAAYC,GACTI,cACAH,QAAQ,4CAA6C,KAG/CI,EAAmBL,GAC9BA,EACGI,cACAH,QAAQ,qDAAsD,IAEtDK,EAAYC,IACtBA,EAAGC,WAAW,OAASC,EAAKC,WAAWH,GAI7BI,EAAeC,EAAGC,aAAaC,QAAQC,OACvCC,EAAa,SAAUC,GAClC,OAAOR,EAAKS,QAAQP,EAAcM,aAKpBE,IACdL,QAAQM,OAAOC,MACQ,UAArBP,QAAQQ,SAAuB,WAAmB,wBAItCC,GAAgBC,aAC9BA,EAAYC,gBACZA,IAEA,OACGD,GAAgBA,EAAaE,OAC7BD,GAAmBA,EAAgBC,eAIxBC,GAAyBC,QAAEA,IACzC,OAAOA,GAAWA,EAAQC"}